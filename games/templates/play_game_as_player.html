{% extends "base.html" %}
{% load static %}

{% block content %}
<nav class="navbar navbar-light bg-light">
  <span class="navbar-brand mb-0 h1">
      {{ player }}
      {% if turn %}
      (Your turn - {{ turn.get_state_display }})
      {% else %}
      (Not your turn)
      {% endif %}
  </span>
</nav>
<div class="flex">
    <div id="right-sidebar" class="sidebar">
        {% if turn %}
        <div id="actions">Actions <span class="float-right">({{ turn.available_actions }})</span></div>
        <div id="buys">Buys <span class="float-right">({{ turn.available_buys }})</span></div>
        <div id="money">Money <span class="float-right">({{ turn.available_money }})</span></div>
        <div id="end-phase">
            <form method="POST" action="{% url 'turns_end_phase' turn_id=turn.pk %}">
                {% csrf_token %}
                <button>End Phase</button>
            </form>
        </div>
        {% endif %}
    </div>
    <div id="body">
        <h2>KINGDOM</h2>
        <span class="card">
            {{ game.real_kingdom.Gold.card }}
            <img src="{{ game.real_kingdom.Gold.card.url }}" />
        </span>
        <span class="card">
            {{ game.real_kingdom.Silver.card }}
            <img src="{{ game.real_kingdom.Silver.card.url }}" />
        </span>
        <span class="card">
            {{ game.real_kingdom.Copper.card }}
            <img src="{{ game.real_kingdom.Copper.card.url }}" />
        </span>
        <span class="card">
            {{ game.real_kingdom.Province.card }}&nbsp;({{ game.real_kingdom.Province.count }})
            <img src="{{ game.real_kingdom.Province.card.url }}" />
        </span>
        <span class="card">
            {{ game.real_kingdom.Duchy.card }}&nbsp;({{ game.real_kingdom.Duchy.count }})
            <img src="{{ game.real_kingdom.Duchy.card.url }}" />
        </span>
        <span class="card">
            {{ game.real_kingdom.Estate.card }}&nbsp;({{ game.real_kingdom.Estate.count }})
            <img src="{{ game.real_kingdom.Estate.card.url }}" />
        </span>
        <span class="card">
            {{ game.real_kingdom.Curse.card }}&nbsp;({{ game.real_kingdom.Curse.count }})
            <img src="{{ game.real_kingdom.Curse.card.url }}" />
        </span>
        </br>
        </br>
        {% for row in game.real_kingdom.values %}
            {% if row.card.name in "Gold,Silver,Copper,Province,Duchy,Estate,Curse" %}
            {% else %}
                <span class="card">
                    {{ row.card }}&nbsp;({{ row.count }})
                    <img src="{{ row.card.url }}" />
                </span>
            {% endif %}
        {% endfor %}
    </div>
    <div id="left-sidebar" class="sidebar">
    </div>
</div>
<div id="played-cards">
    <div class="centered">
        Played Cards
    </div>
    {% for card in deck.played_cards %}
    <span class="card">
        <span class="card-name">
            {{ card }}
        </span>
    </span>
    {% endfor %}
</div>
<div id="hand">
    <div class="centered">
        Hand
    </div>
    <span class="card">
        Deck
        {{ deck.draw_pile|length }}
        <img src="{% static 'images/card_back.jpg' %}" />
    </span>
    {% for card in deck.real_hand %}
    <span class="card" draggable="true">
        <span class="card-name">
            {{ card }}
        </span>
        </br>
        <img src="{{ card.url }}" />
    </span>
    {% endfor %}
    <span class="card pull-right">
        Discard
        {{ deck.discard_pile|length }}
        <img src="{% static 'images/card_back.jpg' %}" />
    </span>
</div>
{% endblock content %}
